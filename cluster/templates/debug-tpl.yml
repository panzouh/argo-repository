{{- if .Values.debug }}
{{- $secretAuthValue := dict "traefik.ingress.kubernetes.io/router.middlewares" "traefik-system-security@kubernetescrd" -}}
{{- $secretAuthValue := dict "nginx.ingress.kubernetes.io/auth-type" "basic" "nginx.ingress.kubernetes.io/auth-secret" "basic-auth" "nginx.ingress.kubernetes.io/auth-realm" "Authentication Required" -}}
test: {{ include "url-constructor" (dict "name" "url-test" "ingress" .Values.ingress.ingressDefinition) }}
htpasswd: {{ htpasswd "test" "test" | b64enc }}
{{- $promValues := .Values.monitoring.prometheus.values }}
{{- include "helm-ingress.definition" (dict "name" .Values.monitoring.prometheus.values.server.ingress.name "ingressDefinition" .Values.ingress.ingressDefinition "annotations" .Values.ingress.traefik.values.ingressAnnotations "authSecret" $secretAuthValue) }}
{{- end }}
